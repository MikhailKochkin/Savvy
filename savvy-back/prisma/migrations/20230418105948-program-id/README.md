# Migration `20230418105948-program-id`

This migration has been generated by MikhailKochkin at 4/18/2023, 2:59:48 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Offer" ADD COLUMN     "programId" TEXT

ALTER TABLE "Offer" ADD FOREIGN KEY("programId")REFERENCES "Program"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20230418084950-update-program..20230418105948-program-id
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Application {
   id            String     @id @default(cuid())
@@ -235,9 +235,9 @@
   title             String
   description       String
   image             String
   promotionId       String?
-  syllabus           Json?
+  syllabus          Json?
   months            Int?
   createdAt         DateTime          @default(now())
   updatedAt         DateTime          @updatedAt
   price             Int?
@@ -261,8 +261,9 @@
   tags              String[]
   promocode         Json?
   orders            Order[]
   coursePages       CoursePage[]
+  offers            Offer[]
 }
 model CourseVisit {
   id           String     @id @default(cuid())
@@ -521,8 +522,10 @@
   updatedAt     DateTime @updatedAt
   createdAt     DateTime @default(now())
   userId        String?
   lessonId      String?
+  programId     String?
+  program       Program? @relation(fields: [programId], references: [id])
   lesson        Lesson?  @relation(fields: [lessonId], references: [id])
   user          User?    @relation(fields: [userId], references: [id])
 }
```


