# Migration `20220526083337-gamification`

This migration has been generated by MikhailKochkin at 5/26/2022, 12:33:37 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Chat" ADD COLUMN     "hasSecret" BOOLEAN DEFAULT false

ALTER TABLE "Lesson" ADD COLUMN     "totalPoints" INTEGER DEFAULT 0,
ADD COLUMN     "hasSecret" BOOLEAN DEFAULT false

ALTER TABLE "Note" ADD COLUMN     "hasSecret" BOOLEAN DEFAULT false

ALTER TABLE "Problem" ADD COLUMN     "hasSecret" BOOLEAN DEFAULT false
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20220425150205-chat-clicks..20220526083337-gamification
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Application {
   id            String     @id @default(cuid())
@@ -302,8 +302,10 @@
   createdAt           DateTime             @default(now())
   updatedAt           DateTime             @updatedAt
   name                String
   number              Int?
+  totalPoints         Int?                 @default(0)
+  hasSecret           Boolean?             @default(false)
   published           Boolean?             @default(false)
   open                Boolean?             @default(false)
   type                String?              @default("REGULAR")
   description         String?
@@ -416,8 +418,9 @@
   link_clicks     Int?     @default(0)
   lessonID   String?  @default(cuid())
   updatedAt  DateTime @updatedAt
   createdAt  DateTime @default(now())
+  hasSecret  Boolean? @default(false)
   next       Json?
   userId     String?
   lessonId   String?
   chat       Boolean?
@@ -468,8 +471,9 @@
   updatedAt      DateTime        @updatedAt
   lessonID       String          @default(cuid())
   nodeType       String?
   nodeID         String?         @default(cuid())
+  hasSecret      Boolean?        @default(false)
   hintsList      String[]
   solutionList   String[]
   userId         String
   lessonId       String
@@ -787,8 +791,9 @@
   messages   Json?
   link_clicks     Int?     @default(0)
   updatedAt  DateTime @updatedAt
   createdAt  DateTime @default(now())
+  hasSecret  Boolean? @default(false)
   userId     String
   lessonId   String
   complexity Int?     @default(1)
   lesson     Lesson   @relation(fields: [lessonId], references: [id])
```


