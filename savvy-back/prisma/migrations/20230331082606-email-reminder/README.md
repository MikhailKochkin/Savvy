# Migration `20230331082606-email-reminder`

This migration has been generated by MikhailKochkin at 3/31/2023, 12:26:06 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "EmailReminder" (
    "id" TEXT NOT NULL,
    "userId" TEXT,
    "coursePageId" TEXT,
    "sendAt" TIMESTAMP(3) NOT NULL,
    "link" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" TIMESTAMP(3) NOT NULL,

    PRIMARY KEY ("id")
)

ALTER TABLE "EmailReminder" ADD FOREIGN KEY("userId")REFERENCES "User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "EmailReminder" ADD FOREIGN KEY("coursePageId")REFERENCES "CoursePage"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20230328161159-leadiin..20230331082606-email-reminder
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Application {
   id            String     @id @default(cuid())
@@ -225,8 +225,9 @@
   new_students      User[]            @relation("UserSubjects")
   certificates      Certificate[]
   businessClients   BusinessClient[]
   programs          Program[]
+  emailReminders      EmailReminder[]
 }
 model Program {
   id                String            @id @default(cuid())
@@ -879,8 +880,9 @@
   teamQuestResults    TeamQuestResult[]
   co_coursePages      CoursePage[]         @relation("AuthorsCoursePage")
   new_subjects        CoursePage[]         @relation("UserSubjects")
   offers              Offer[]
+  emailReminders      EmailReminder[]
 }
 model BotDialogue {
   id             String    @id @default(cuid())
@@ -911,8 +913,20 @@
   updatedAt DateTime @updatedAt
   user      User?
 }
+model EmailReminder {
+  id           String      @id @default(cuid())
+  userId       String?
+  user         User?     @relation(fields: [userId], references: [id])
+  coursePageId String?
+  coursePage   CoursePage? @relation(fields: [coursePageId], references: [id])
+  sendAt       DateTime
+  link         String
+  createdAt    DateTime     @default(now())
+  updatedAt    DateTime
+}
+
 model Exam {
   id         String       @id
   nodeType   String?
   nodeID     String?
```


