# Migration `20210213093918-add-complexity-field`

This migration has been generated by MikhailKochkin at 2/13/2021, 12:39:18 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Chat" ADD COLUMN     "complexity" INTEGER DEFAULT 1

ALTER TABLE "Construction" ADD COLUMN     "complexity" INTEGER DEFAULT 1

ALTER TABLE "NewTest" ADD COLUMN     "complexity" INTEGER DEFAULT 1

ALTER TABLE "Note" ADD COLUMN     "complexity" INTEGER DEFAULT 1

ALTER TABLE "Problem" ADD COLUMN     "complexity" INTEGER DEFAULT 1

ALTER TABLE "Quiz" ADD COLUMN     "complexity" INTEGER DEFAULT 1

ALTER TABLE "TextEditor" ADD COLUMN     "complexity" INTEGER DEFAULT 1
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210212131203-chat--update..20210213093918-add-complexity-field
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Application {
   id            String     @id @default(cuid())
@@ -93,8 +93,9 @@
   name                String
   lessonID            String               @default(cuid())
   createdAt           DateTime             @default(now())
   updatedAt           DateTime             @updatedAt
+  complexity          Int?                 @default(1)
   hint                String?
   type                String
   variants            String[]
   answer              String[]
@@ -313,8 +314,9 @@
   lessonID   String?      @default(cuid())
   createdAt  DateTime     @default(now())
   updatedAt  DateTime     @updatedAt
   type       String?      @default("TEST")
+  complexity Int?         @default(1)
   next       Json?
   ifRight    String?
   ifWrong    String?
   question   String[]
@@ -327,19 +329,20 @@
   testResults TestResult[]
 }
 model Note {
-  id        String   @id @default(cuid())
-  text      String
-  chat      Boolean?
-  lessonID  String?  @default(cuid())
-  updatedAt DateTime @updatedAt
-  createdAt DateTime @default(now())
-  next      Json?
-  userId    String?
-  lessonId  String?
-  lesson    Lesson?  @relation(fields: [lessonId], references: [id])
-  user      User?    @relation(fields: [userId], references: [id])
+  id          String   @id @default(cuid())
+  text        String
+  complexity  Int?     @default(1)
+  chat        Boolean?
+  lessonID    String?  @default(cuid())
+  updatedAt   DateTime @updatedAt
+  createdAt   DateTime @default(now())
+  next        Json?
+  userId      String?
+  lessonId    String?
+  lesson      Lesson?  @relation(fields: [lessonId], references: [id])
+  user        User?    @relation(fields: [userId], references: [id])
 }
 model Order {
   id           String     @id @default(cuid())
@@ -375,8 +378,9 @@
   text          String
   hints         String?
   solution      String?
   answer        String?
+  complexity    Int?             @default(1)
   createdAt     DateTime        @default(now())
   updatedAt     DateTime        @updatedAt
   lessonID      String          @default(cuid())
   nodeType      String?
@@ -414,8 +418,9 @@
   createdAt  DateTime     @default(now())
   updatedAt  DateTime     @updatedAt
   type       String?      @default("TEST")
   next       Json?
+  complexity Int?         @default(1)
   ifRight    String?
   ifWrong    String?
   check      String?      @default("IDEA")
   userId     String
@@ -512,8 +517,9 @@
 model TextEditor {
   id               String             @id @default(cuid())
   name             String
   text             String
+  complexity       Int?               @default(1)
   lessonID         String             @default(cuid())
   createdAt        DateTime           @default(now())
   updatedAt        DateTime           @updatedAt
   totalMistakes    Int?
@@ -688,8 +694,9 @@
 model Chat {
   id           String       @id @default(cuid())
   name         String?
   messages     Json?
+  complexity   Int?         @default(1)
   updatedAt    DateTime     @updatedAt
   createdAt    DateTime     @default(now())
   userId       String
   lessonId     String
```


